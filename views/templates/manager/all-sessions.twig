{% extends 'layout.twig' %}

{% block title %}Home{% endblock %}

{% block head %}

{% endblock %}

{% block content %}

<div class='row-fluid container-relative'>
	<div class='span9'>
		<h1>Sessions</h1>
	</div>
	<div class='span3'>
		<a href='#createSession' class='btn btn-success pull-bottom-right' data-toggle="modal">Create Session</a>

		<!-- Create Session Modal -->
		<div id="createSession" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
				<h3 id="myModalLabel">Create a New Session</h3>
			</div>
			<div class="modal-body">
				<form id='create-session-form' action='manage/session/create' method='post'>
					<label for='name'>Name</label>
					<input name='name' type='text'/>
				</form>
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
				<button id='create-session' class="btn btn-primary">Create</button>
			</div>
			<script>
				$('#create-session').click(function() {
					$('#create-session-form').submit();
				});
			</script>
		</div>
	</div>
</div>


<table class='table table-striped table-hover'>
	<thead>
		<tr><th>Name</th><th>Created</th><th><div class='text-center'>Members</div></th><th></th></tr>
	</thead>
	<tbody>
		{% for session in sessions %}
			<tr>
				<td>{{session.title}}</td>
				<td class='humanize-timestamp'>{{session.created}}</td>
				<td><div class='text-center'>{{session.memberCount}}</div></td>
				<td>
					<a class='btn btn-info pull-right btn-small' href='manage/session/{{session.id}}'>Manage</a>
				</td>
			</tr>
		{% endfor %}
	</tbody>
</table>

{% endblock %}
